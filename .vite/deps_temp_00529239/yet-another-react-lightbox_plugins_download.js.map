{
  "version": 3,
  "sources": ["../../node_modules/yet-another-react-lightbox/dist/plugins/download/index.js"],
  "sourcesContent": ["import { createIcon, useLightboxProps, useLightboxState, isImageSlide, IconButton, addToolbarButton } from '../../index.js';\nimport * as React from 'react';\nimport { PLUGIN_DOWNLOAD } from '../../types.js';\n\nconst defaultDownloadProps = {\n    download: undefined,\n};\nconst resolveDownloadProps = (download) => ({\n    ...defaultDownloadProps,\n    ...download,\n});\n\nfunction download(url, name) {\n    const xhr = new XMLHttpRequest();\n    xhr.open(\"GET\", url);\n    xhr.responseType = \"blob\";\n    xhr.onload = () => {\n        saveAs(xhr.response, name);\n    };\n    xhr.onerror = () => {\n        console.error(\"Failed to download file\");\n    };\n    xhr.send();\n}\nfunction corsEnabled(url) {\n    const xhr = new XMLHttpRequest();\n    xhr.open(\"HEAD\", url, false);\n    try {\n        xhr.send();\n    }\n    catch (e) {\n    }\n    return xhr.status >= 200 && xhr.status <= 299;\n}\nfunction click(link) {\n    try {\n        link.dispatchEvent(new MouseEvent(\"click\"));\n    }\n    catch (e) {\n        const event = document.createEvent(\"MouseEvents\");\n        event.initMouseEvent(\"click\", true, true, window, 0, 0, 0, 80, 20, false, false, false, false, 0, null);\n        link.dispatchEvent(event);\n    }\n}\nfunction saveAs(source, name) {\n    const link = document.createElement(\"a\");\n    link.rel = \"noopener\";\n    link.download = name || \"\";\n    if (!link.download) {\n        link.target = \"_blank\";\n    }\n    if (typeof source === \"string\") {\n        link.href = source;\n        if (link.origin !== window.location.origin) {\n            if (corsEnabled(link.href)) {\n                download(source, name);\n            }\n            else {\n                link.target = \"_blank\";\n                click(link);\n            }\n        }\n        else {\n            click(link);\n        }\n    }\n    else {\n        link.href = URL.createObjectURL(source);\n        setTimeout(() => URL.revokeObjectURL(link.href), 30000);\n        setTimeout(() => click(link), 0);\n    }\n}\n\nconst DownloadIcon = createIcon(\"DownloadIcon\", React.createElement(\"path\", { d: \"M18 15v3H6v-3H4v3c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-3h-2zm-1-4-1.41-1.41L13 12.17V4h-2v8.17L8.41 9.59 7 11l5 5 5-5z\" }));\nfunction DownloadButton() {\n    const { render, on, download: downloadProps } = useLightboxProps();\n    const { download: customDownload } = resolveDownloadProps(downloadProps);\n    const { currentSlide, currentIndex } = useLightboxState();\n    if (render.buttonDownload) {\n        return React.createElement(React.Fragment, null, render.buttonDownload());\n    }\n    const downloadUrl = (currentSlide &&\n        (currentSlide.downloadUrl ||\n            (typeof currentSlide.download === \"string\" && currentSlide.download) ||\n            (typeof currentSlide.download === \"object\" && currentSlide.download.url) ||\n            (isImageSlide(currentSlide) && currentSlide.src))) ||\n        undefined;\n    const canDownload = customDownload ? (currentSlide === null || currentSlide === void 0 ? void 0 : currentSlide.download) !== false : Boolean(downloadUrl);\n    const defaultDownload = () => {\n        if (currentSlide && downloadUrl) {\n            const downloadFilename = currentSlide.downloadFilename ||\n                (typeof currentSlide.download === \"object\" && currentSlide.download.filename) ||\n                undefined;\n            saveAs(downloadUrl, downloadFilename);\n        }\n    };\n    const handleDownload = () => {\n        var _a;\n        if (currentSlide) {\n            (customDownload || defaultDownload)({ slide: currentSlide, saveAs });\n            (_a = on.download) === null || _a === void 0 ? void 0 : _a.call(on, { index: currentIndex });\n        }\n    };\n    return (React.createElement(IconButton, { label: \"Download\", icon: DownloadIcon, renderIcon: render.iconDownload, disabled: !canDownload, onClick: handleDownload }));\n}\n\nfunction Download({ augment }) {\n    augment(({ toolbar, download, ...restProps }) => ({\n        toolbar: addToolbarButton(toolbar, PLUGIN_DOWNLOAD, React.createElement(DownloadButton, null)),\n        download: resolveDownloadProps(download),\n        ...restProps,\n    }));\n}\n\nexport { Download as default };\n"],
  "mappings": "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",
  "names": ["download"]
}
